define(['backbone','jquery','content/search/SearchView','content/search/Search','content/translations/TranslationsView','content/translations/Translations','content/translation/TranslationView','content/translation/Translation'], function(Backbone,$,SearchView,Search,TranslationsView,Translations,TranslationView,Translation) {var Constructor = Backbone.Router.extend({routes : {'' : 'compose ','t/:id' : 'compose t/:id'},'compose ' : function() {var _this = this, incorrectRegions = 0, n = 0;app.document.trigger('fetchstart', '');if(typeof app.models.search === 'undefined' || typeof app.views.search === 'undefined') {app.models.search = new Search;app.views.search = new SearchView(app.models.search);incorrectRegions++;setTimeout(function() {try {app.models.search.fetch({success: function() {_this.content['search'] = app.views.search.render();if(typeof app.views.search.bindModel === 'function') {app.views.search.bindModel();}n++;if(n === incorrectRegions) {app.document.trigger('fetchend', '');_this['render ']();}}});}catch(err) {if(err.message === 'A "url" property or function must be specified') {_this.content['search'] = app.views.search.render();n++;if(n === incorrectRegions) {app.document.trigger('fetchend', '');_this['render ']();}}else {throw err;}}}, 0);}else {app.models.search.onHistoryChange(window.location.pathname.substr(1));app.views.search.onHistoryChange(window.location.pathname.substr(1));}if(typeof app.models.translations === 'undefined' || typeof app.views.translations === 'undefined') {app.models.translations = new Translations;app.views.translations = new TranslationsView(app.models.translations);incorrectRegions++;setTimeout(function() {try {app.models.translations.fetch({success: function() {_this.content['body'] = app.views.translations.render();if(typeof app.views.translations.bindModel === 'function') {app.views.translations.bindModel();}n++;if(n === incorrectRegions) {app.document.trigger('fetchend', '');_this['render ']();}}});}catch(err) {if(err.message === 'A "url" property or function must be specified') {_this.content['body'] = app.views.translations.render();n++;if(n === incorrectRegions) {app.document.trigger('fetchend', '');_this['render ']();}}else {throw err;}}}, 0);}else {app.models.translations.onHistoryChange(window.location.pathname.substr(1));app.views.translations.onHistoryChange(window.location.pathname.substr(1));}for(var view in app.views) {if(view !== 'search' && view !== 'translations') {app.views[view].remove();delete app.views[view];if(typeof app.models[view] !== 'undefined') {Backbone.Relational.store.unregister(app.models[view]);}}}},'compose t/:id' : function() {var _this = this, incorrectRegions = 0, n = 0;app.document.trigger('fetchstart', 't/:id');if(typeof app.models.search === 'undefined' || typeof app.views.search === 'undefined') {app.models.search = new Search;app.views.search = new SearchView(app.models.search);incorrectRegions++;setTimeout(function() {try {app.models.search.fetch({success: function() {_this.content['search'] = app.views.search.render();if(typeof app.views.search.bindModel === 'function') {app.views.search.bindModel();}n++;if(n === incorrectRegions) {app.document.trigger('fetchend', 't/:id');_this['render t/:id']();}}});}catch(err) {if(err.message === 'A "url" property or function must be specified') {_this.content['search'] = app.views.search.render();n++;if(n === incorrectRegions) {app.document.trigger('fetchend', 't/:id');_this['render t/:id']();}}else {throw err;}}}, 0);}else {app.models.search.onHistoryChange(window.location.pathname.substr(1));app.views.search.onHistoryChange(window.location.pathname.substr(1));}if(typeof app.models.translations === 'undefined' || typeof app.views.translations === 'undefined') {app.models.translations = new Translations;app.views.translations = new TranslationsView(app.models.translations);incorrectRegions++;setTimeout(function() {try {app.models.translations.fetch({success: function() {_this.content['body'] = app.views.translations.render();if(typeof app.views.translations.bindModel === 'function') {app.views.translations.bindModel();}n++;if(n === incorrectRegions) {app.document.trigger('fetchend', 't/:id');_this['render t/:id']();}}});}catch(err) {if(err.message === 'A "url" property or function must be specified') {_this.content['body'] = app.views.translations.render();n++;if(n === incorrectRegions) {app.document.trigger('fetchend', 't/:id');_this['render t/:id']();}}else {throw err;}}}, 0);}else {app.models.translations.onHistoryChange(window.location.pathname.substr(1));app.views.translations.onHistoryChange(window.location.pathname.substr(1));}if(typeof app.models.translation === 'undefined' || typeof app.views.translation === 'undefined') {app.models.translation = new Translation;app.views.translation = new TranslationView(app.models.translation);incorrectRegions++;setTimeout(function() {try {app.models.translation.fetch({success: function() {_this.content['translation'] = app.views.translation.render();if(typeof app.views.translation.bindModel === 'function') {app.views.translation.bindModel();}n++;if(n === incorrectRegions) {app.document.trigger('fetchend', 't/:id');_this['render t/:id']();}}});}catch(err) {if(err.message === 'A "url" property or function must be specified') {_this.content['translation'] = app.views.translation.render();n++;if(n === incorrectRegions) {app.document.trigger('fetchend', 't/:id');_this['render t/:id']();}}else {throw err;}}}, 0);}else {app.models.translation.onHistoryChange(window.location.pathname.substr(1));app.views.translation.onHistoryChange(window.location.pathname.substr(1));}for(var view in app.views) {if(view !== 'search' && view !== 'translations' && view !== 'translation') {app.views[view].remove();delete app.views[view];if(typeof app.models[view] !== 'undefined') {Backbone.Relational.store.unregister(app.models[view]);}}}},'render ' : function() {app.document.trigger('renderstart');if(document.querySelectorAll('[data-layout=app]').length) {app.document.trigger('rendersearchstart');try {if(!document.querySelector('[data-content="search"]')) {var $region = document.querySelector('[data-region="search"]');$region.innerHTML = this.content['search'];$region.classList.remove('hidden');}if(app.views.el !== '<div></div>') {app.views.search.setElement('[data-content="search"]');}if(!app.views.search.boundDOM) {app.views.search.bindDOM();app.views.search.boundDOM = true;}}catch(err) {throw err;}app.document.trigger('rendersearchend');app.document.trigger('rendertranslationsstart');try {if(!document.querySelector('[data-content="translations"]')) {var $region = document.querySelector('[data-region="body"]');$region.innerHTML = this.content['body'];$region.classList.remove('hidden');}if(app.views.el !== '<div></div>') {app.views.translations.setElement('[data-content="translations"]');}if(!app.views.translations.boundDOM) {app.views.translations.bindDOM();app.views.translations.boundDOM = true;}}catch(err) {throw err;}app.document.trigger('rendertranslationsend');}else {app.$layout.remove();app.$body.append(app.layoutTmpls.app({search : this.content['search'],body : this.content['translations']}));}app.document.trigger('renderend');},'render t/:id' : function() {app.document.trigger('renderstart');if(document.querySelectorAll('[data-layout=app]').length) {app.document.trigger('rendersearchstart');try {if(!document.querySelector('[data-content="search"]')) {var $region = document.querySelector('[data-region="search"]');$region.innerHTML = this.content['search'];$region.classList.remove('hidden');}if(app.views.el !== '<div></div>') {app.views.search.setElement('[data-content="search"]');}if(!app.views.search.boundDOM) {app.views.search.bindDOM();app.views.search.boundDOM = true;}}catch(err) {throw err;}app.document.trigger('rendersearchend');app.document.trigger('rendertranslationsstart');try {if(!document.querySelector('[data-content="translations"]')) {var $region = document.querySelector('[data-region="body"]');$region.innerHTML = this.content['body'];$region.classList.remove('hidden');}if(app.views.el !== '<div></div>') {app.views.translations.setElement('[data-content="translations"]');}if(!app.views.translations.boundDOM) {app.views.translations.bindDOM();app.views.translations.boundDOM = true;}}catch(err) {throw err;}app.document.trigger('rendertranslationsend');app.document.trigger('rendertranslationstart');try {if(!document.querySelector('[data-content="translation"]')) {var $region = document.querySelector('[data-region="translation"]');$region.innerHTML = this.content['translation'];$region.classList.remove('hidden');}if(app.views.el !== '<div></div>') {app.views.translation.setElement('[data-content="translation"]');}if(!app.views.translation.boundDOM) {app.views.translation.bindDOM();app.views.translation.boundDOM = true;}}catch(err) {throw err;}app.document.trigger('rendertranslationend');}else {app.$layout.remove();app.$body.append(app.layoutTmpls.app({search : this.content['search'],body : this.content['translations'],translation : this.content['translation']}));}app.document.trigger('renderend');},});Constructor.prototype.content = {};return Constructor;});